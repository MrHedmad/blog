<!doctype html><html lang=en><head><title>Arch Installation ::
Hedmad's Blog — A place of code and pain
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Installing Arch linux # These are my short notes on installing Arch on my laptop (an Asus Zenbook 14). It has UEFI Boot and a single hard disk of 500Gb. It has an Italian keyboard (it), a NVIDIA card and an Intel processor.
Mandatory disclaimer: Do not follow this guide. Follow the real guide over in the Arch wiki.
Get an installation ISO # Download from www.archlinux.org/download/ the latest ISO and ask a friend with windows to use Rufus to make a bootable USB stick with it."><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://mrhedmad.github.io/blog/posts/archinstall/><link rel=stylesheet href=https://mrhedmad.github.io/blog/assets/style.css><link rel=stylesheet href=https://mrhedmad.github.io/blog/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://mrhedmad.github.io/blog/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://mrhedmad.github.io/blog/img/favicon.png><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://mrhedmad.github.io/blog/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Arch Installation"><meta name=twitter:description content="All the steps I use to install Arch on my tiny laptop. May be useful to future me or to someone who needs a quick reference guide."><meta property="og:title" content="Arch Installation"><meta property="og:description" content="All the steps I use to install Arch on my tiny laptop. May be useful to future me or to someone who needs a quick reference guide."><meta property="og:type" content="article"><meta property="og:url" content="https://mrhedmad.github.io/blog/posts/archinstall/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-10T00:00:00+00:00"><meta property="article:modified_time" content="2022-04-10T00:00:00+00:00"><link href=https://genomic.social/@MrHedmad rel=me><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js></script></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=https://mrhedmad.github.io/blog/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span><span class=logo__text>hedmad@blog</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/blog/about>About</a></li><li><a href=/blog/archive>Archive</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/blog/about>About</a></li><li><a href=/blog/archive>Archive</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Arch Installation</h1><div class=post-meta><span class=post-date>2022-04-10</span></div><div class=post-content><h2>Table of Contents</h2><aside class=table-of-contents><nav id=TableOfContents><ul><li><a href=#get-an-installation-iso>Get an installation ISO</a></li><li><a href=#setup-the-setup-environment>Setup the setup environment</a></li><li><a href=#partition-the-disk>Partition the disk</a></li><li><a href=#pacstrapping>Pacstrapping</a></li><li><a href=#setup-the-installation>Setup the installation</a><ul><li><a href=#setup-the-bootloader>Setup the bootloader</a></li></ul></li><li><a href=#setup-new-installation-wifi>Setup new installation wifi</a></li></ul><ul><li><a href=#make-a-new-user>Make a new user</a></li><li><a href=#setup-yay>Setup <code>yay</code></a></li><li><a href=#xorg>Xorg</a></li><li><a href=#a-desktop>A desktop</a></li><li><a href=#get-a-web-browser>Get a web browser</a></li><li><a href=#configure-the-terminal>Configure the terminal</a></li><li><a href=#microphone>Microphone</a></li></ul><ul><li><a href=#add-some-wallpaper-optional>Add some wallpaper (optional)</a></li><li><a href=#audio-management>Audio management</a></li><li><a href=#other-programs>Other programs</a></li></ul></nav></aside><h1 id=installing-arch-linux>Installing Arch linux
<a href=#installing-arch-linux class=h-anchor aria-hidden=true>#</a></h1><p>These are my short notes on installing Arch on my laptop (an Asus Zenbook 14).
It has UEFI Boot and a single hard disk of 500Gb. It has an Italian keyboard
(<code>it</code>), a NVIDIA card and an Intel processor.</p><blockquote><p>Mandatory disclaimer: Do not follow this guide. Follow the real guide over in
the <a href=https://wiki.archlinux.org/title/installation_guide>Arch wiki</a>.</p></blockquote><h2 id=get-an-installation-iso>Get an installation ISO
<a href=#get-an-installation-iso class=h-anchor aria-hidden=true>#</a></h2><p>Download from <a href=https://www.archlinux.org/download/>www.archlinux.org/download/</a> the latest ISO and ask a friend with
windows to use <a href=https://rufus.ie/en/>Rufus</a> to make a bootable USB stick with
it. Say thanks and buy them a snack.</p><p>Plug that bad boy in and hold <code>F2</code> as the pc is booting up. Enter the BIOS and
set the USB stick to the highest boot priority. Once in the arch installation
environment, continue on.</p><h2 id=setup-the-setup-environment>Setup the setup environment
<a href=#setup-the-setup-environment class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Set the language</span>
</span></span><span style=display:flex><span>loadkeys it
</span></span><span style=display:flex><span><span style=color:#75715e># Connect to wifi</span>
</span></span><span style=display:flex><span>iwctl
</span></span></code></pre></div><p>Inside <code>iwctl</code> you should use <code>station wlan0 connect &lt;some wifi></code>. It will ask
for the password interactively. <code>ping archlinux.org</code> to see if it worked.</p><p>Set the time, so the mirrors do no fail because they are in the future:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>timedatectl set-ntp true
</span></span></code></pre></div><h2 id=partition-the-disk>Partition the disk
<a href=#partition-the-disk class=h-anchor aria-hidden=true>#</a></h2><p>I assume that the disk is <code>/dev/sda</code>, but change it if it&rsquo;s different under <code>fdisk -l</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>fdisk /dev/sda
</span></span><span style=display:flex><span>&gt; g <span style=color:#75715e># New GUID partition table</span>
</span></span><span style=display:flex><span>&gt; n <span style=color:#75715e># New partition</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default start sector</span>
</span></span><span style=display:flex><span>&gt; +500M <span style=color:#75715e># Min BOOT is 300Mb</span>
</span></span><span style=display:flex><span>&gt; t <span style=color:#75715e># Change partition type</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#ae81ff>1</span> <span style=color:#75715e># EFI system</span>
</span></span><span style=display:flex><span>&gt; n
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default start sector</span>
</span></span><span style=display:flex><span>&gt; +8G
</span></span><span style=display:flex><span>&gt; t
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#ae81ff>19</span> <span style=color:#75715e># Linux SWAP</span>
</span></span><span style=display:flex><span>&gt; n
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default start sector</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default end sector - Rest of disk</span>
</span></span><span style=display:flex><span>&gt; t
</span></span><span style=display:flex><span>&gt; <span style=color:#75715e># Default ID</span>
</span></span><span style=display:flex><span>&gt; <span style=color:#ae81ff>20</span> <span style=color:#75715e># Linux filesystem</span>
</span></span><span style=display:flex><span>&gt; p <span style=color:#75715e># Print table - check if everything is OK</span>
</span></span><span style=display:flex><span>&gt; w <span style=color:#75715e># Write to disk</span>
</span></span></code></pre></div><p>Make the filesystems. I assume that <code>/dev/sda1</code> is boot, <code>/dev/sda2</code> is swap, and <code>dev/sda3</code> is root.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkfs.fat -F <span style=color:#ae81ff>32</span> /dev/sda1
</span></span><span style=display:flex><span>mkswap /dev/sda2
</span></span><span style=display:flex><span>mkfs.ext4 /dev/sda3
</span></span></code></pre></div><p>Mount the filesystems:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mount /dev/sda3 /mnt
</span></span><span style=display:flex><span>mkdir /mnt/boot
</span></span><span style=display:flex><span>mount /dev/sda1 /mnt/boot
</span></span><span style=display:flex><span>swapon /dev/sda2
</span></span></code></pre></div><h2 id=pacstrapping>Pacstrapping
<a href=#pacstrapping class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Update mirrors</span>
</span></span><span style=display:flex><span>reflector --latest <span style=color:#ae81ff>100</span> --country <span style=color:#e6db74>&#39;Italy,Germany,&#39;</span> --sort rate --save /etc/pacman.d/mirrorlist
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Pacstrap basic stuff:</span>
</span></span><span style=display:flex><span>pacstrap /mnt base linux-zen linux-zen-headers linux-firmware base-devel <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  sudo man-db man-pages texinfo intel-ucode <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  iwd neovim python git curl
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Generate an fstab file:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This allows the kernel to know what to mount at boot, and do it automatically.</span>
</span></span><span style=display:flex><span>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span></code></pre></div><p>Now we can <code>chroot</code> in the new environment with <code>arch-chroot /mnt</code>.</p><h2 id=setup-the-installation>Setup the installation
<a href=#setup-the-installation class=h-anchor aria-hidden=true>#</a></h2><p>While inside the new installation (previous step):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># Set the local clock</span>
</span></span><span style=display:flex><span>ln -sf /usr/share/zoneinfo/Europe/Rome /etc/localtime
</span></span><span style=display:flex><span>hwclock --systohc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># `nvim /etc/locale.gen` and uncomment `en_US.UTF-8 UTF-8`.</span>
</span></span><span style=display:flex><span>locale-gen
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;LANG=en_US.UTF-8&#34;</span> &gt; /etc/locale.conf
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;KEYMAP=it&#34;</span> &gt; /etc/vconsole.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Give the machine an hostname:</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;neutrino&#34;</span> &gt; /etc/hotname
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Change the root password</span>
</span></span><span style=display:flex><span>passwd
</span></span></code></pre></div><p>If pac-strapping does not work due to keyring stuff, try:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman-keys --init
</span></span><span style=display:flex><span>pacman-keys --populate
</span></span><span style=display:flex><span>pacman -Syu achlinux-keyring
</span></span><span style=display:flex><span><span style=color:#75715e># Possibly follow with another pacman-keys --populate</span>
</span></span></code></pre></div><h3 id=setup-the-bootloader>Setup the bootloader
<a href=#setup-the-bootloader class=h-anchor aria-hidden=true>#</a></h3><p>I use the simplest of the simple bootloaders, <code>systemd-boot</code>.
It is already in the installation, as it is part of <code>systemd</code>. Install it to the boot
folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bootctl install
</span></span></code></pre></div><p>Make the loader configurations. If you boot and the kernel tells you &ldquo;You&rsquo;re on your own, good luck&rdquo;,
you probably fucked up this step (you can fix it by returning to the live
installation, with the usb key, and redoing this step).
Edit <code>/boot/loader/loader.conf</code>:</p><pre tabindex=0><code>default  arch.conf
timeout  5
console-mode max
editor no
</code></pre><p>Add the two main loaders for arch linux, the canonical one (<code>arch.conf</code>) and the fallback one
(<code>arch-fallback.conf</code>). Edit <code>/boot/loader/entries/arch.conf</code> and enter:</p><pre tabindex=0><code>title  Arch Linux
linux  /vmlinuz-linux-zen
initrd /intel-ucode.img
initrd /initramfs-linux-zen.img
options root=/dev/sda3
</code></pre><p>Then <code>cp /boot/loader/entries/arch.conf /boot/loader/entries/arch-fallback.conf</code>, and
edit the copy (<code>/boot/loader/entries/arch-fallback.conf</code>):</p><pre tabindex=0><code>title  Arch Linux
linux  /vmlinuz-linux-zen
initrd /intel-ucode.img
initrd /initramfs-linux-zen-fallback.img   &lt;&lt;&lt; This is the only line that changed
options root=/dev/sda3
</code></pre><p>We can now reboot:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>exit <span style=color:#75715e># exit the chroot environment</span>
</span></span><span style=display:flex><span>umount -R /mnt
</span></span><span style=display:flex><span>reboot
</span></span></code></pre></div><p>If everything goes to plan, you should get a prompt asking for username (<code>root</code>) and a password
(whatever you changed it to before).</p><h2 id=setup-new-installation-wifi>Setup new installation wifi
<a href=#setup-new-installation-wifi class=h-anchor aria-hidden=true>#</a></h2><p>The live image needs some fine tuning to allow internet access.
Edit <code>/etc/iwd/main.conf</code> to:</p><pre tabindex=0><code>[General]
EnableNetworkConfiguration=true

[Network]
EnableIPv6=true
NameResolvingService=systemd
</code></pre><p>Edit <code>/etc/systemd/network/25-wireless.network</code> to:</p><pre tabindex=0><code>[Match]

[Network]
DHCP=yes
IgnoreCarrierLoss=3s
</code></pre><p>Edit the <code>/etc/systemd/resolved.conf</code> file to set some DNS addresses.
Put some DNS servers from the examples (just the numerical address) to <code>DNS=</code>
and <code>fallback-DNS=</code>. Leave a space between the different addresses.
Enable the services:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl enable --now systemd-resolved.service
</span></span><span style=display:flex><span>systemctl enable --now systemd-networkd.service
</span></span><span style=display:flex><span>systemctl enable --now iwd.service
</span></span></code></pre></div><p>Now you can use <code>iwctl</code> to setup a connection just like the installation environment.</p><p>Remember to set the NTP servers and enable NTP sync. Edit
<code>/etc/systemd/timesyncd.conf</code> and add any NTP servers you like (I use arch&rsquo;s),
and enable <code>systemd-timesyncd.service</code> if not enabled yet.</p><h1 id=post-installation>Post installation
<a href=#post-installation class=h-anchor aria-hidden=true>#</a></h1><p>Now the live environment boots and has internet access, but it is not really
useful as-is.</p><h2 id=make-a-new-user>Make a new user
<a href=#make-a-new-user class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>groupadd docker
</span></span><span style=display:flex><span>useradd -m -G wheel,docker -s /bin/zsh hedmad
</span></span><span style=display:flex><span>passwd hedmad
</span></span></code></pre></div><p>Edit <code>/etc/sudoers</code> and uncomment the lines giving the <code>wheel</code> group access to
<code>sudo</code>. This should be done with <code>visudo</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>export EDITOR<span style=color:#f92672>=</span>/usr/bin/nvim
</span></span><span style=display:flex><span>visudo
</span></span></code></pre></div><p>Now we can restart and login with our user <code>hedmad</code>. <code>zsh</code> will ask some
variables to be set, but we can just ignore it and select <code>q</code> (or <code>0</code>) and skip
this, as we&rsquo;re gonna pull in the configs with <code>chezmoi</code>.</p><h2 id=setup-yay>Setup <code>yay</code>
<a href=#setup-yay class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>pacman -S --needed git base-devel
</span></span><span style=display:flex><span>git clone https://aur.archlinux.org/yay.git
</span></span><span style=display:flex><span>cd yay
</span></span><span style=display:flex><span>makepkg -si
</span></span><span style=display:flex><span>cd ..
</span></span><span style=display:flex><span>rm -rf yay
</span></span></code></pre></div><h2 id=xorg>Xorg
<a href=#xorg class=h-anchor aria-hidden=true>#</a></h2><p>Xorg is the most used display server. It is what renders the windows you see.
Install the <code>xorg</code> package and the graphics card drivers. I use the proprietary
drivers as the open-source ones did not play nice with PRIME rendering (for some
reason I don&rsquo;t really get):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># As we are using the zen kernel, the nvidia drivers need to be recompiled</span>
</span></span><span style=display:flex><span><span style=color:#75715e># at every update. This is done automatically with `dkms`. To run a progam with</span>
</span></span><span style=display:flex><span><span style=color:#75715e># accelleration, run `prime-run &lt;executable&gt;`.</span>
</span></span><span style=display:flex><span>sudo pacman -S xorg nvidia-dkms nvidia-prime
</span></span></code></pre></div><p>We need a wait to start X. We could use a display manager, but this is arch,
so it&rsquo;s bloat. We install <code>xinit</code> to start X:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo pacman -S xorg-xinit
</span></span></code></pre></div><p>Add to Xorg the keyboard layout. Edit <code>/etc/X11/xorg.conf.d/00-keyboard.conf</code>:</p><pre tabindex=0><code>Section &#34;InputClass&#34;
        Identifier &#34;system-keyboard&#34;
        MatchIsKeyboard &#34;on&#34;
        Option &#34;XkbLayout&#34; &#34;it,us&#34;
        Option &#34;XkbModel&#34; &#34;pc104&#34;
        Option &#34;XkbVariant&#34; &#34;nodeadkeys,&#34;
        Option &#34;XkbOptions&#34; &#34;grp:win_space_toggle&#34;
EndSection
</code></pre><p>I use the it keyboard without dead keys as my main (built in) keyboard, but
sometimes I need to swap to us to use my portable Corne keyboard (that uses
the US layout).</p><p>Pull in the config files with <code>chezmoi</code>, so we can use them when needed:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>chezmoi init https://github.com/MrHedmad/dotfiles.git
</span></span></code></pre></div><h2 id=a-desktop>A desktop
<a href=#a-desktop class=h-anchor aria-hidden=true>#</a></h2><p>The terminal is cool and all, but we would like a desktop. I choose <code>plasma</code>, from KDE. I also add <code>NetworkManager</code> to better handle GUI network manager. It also works with <code>iwd</code> after some configuration (refer to the wiki).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo pacman -Syu plasma networkmanager kde-applications
</span></span></code></pre></div><h2 id=get-a-web-browser>Get a web browser
<a href=#get-a-web-browser class=h-anchor aria-hidden=true>#</a></h2><p>To look at this guide more cleanly (and get off your phone), install a web
browser. I choose firefox:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo pacman -S firefox
</span></span></code></pre></div><p>I use a theme <a href=https://addons.mozilla.org/en-US/firefox/addon/nicothin-dark-theme/>found here</a>.</p><h2 id=configure-the-terminal>Configure the terminal
<a href=#configure-the-terminal class=h-anchor aria-hidden=true>#</a></h2><p>The zsh shell is currently pretty boring. Install oh-my-zsh and Powerlevel10k
to give it some zest.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># Follow the guide on their github.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Keep in mind that pulling a script from github and passing it to `sh` from</span>
</span></span><span style=display:flex><span><span style=color:#75715e># curl is a major security risk. Pull it first, then run it.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reccomended: install fira code nerd font</span>
</span></span><span style=display:flex><span>sh -c <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>git clone --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> https://github.com/romkatv/powerlevel10k.git <span style=color:#e6db74>${</span>ZSH_CUSTOM<span style=color:#66d9ef>:-</span>$HOME/.oh-my-zsh/custom<span style=color:#e6db74>}</span>/themes/powerlevel10k
</span></span></code></pre></div><h2 id=microphone>Microphone
<a href=#microphone class=h-anchor aria-hidden=true>#</a></h2><p>To enable the microphone, the specific module for Alsa has to be loaded manually.
This should work out-of-the-box, but it does not. It&rsquo;s an easy tweak though.
Edit <code>/etc/pulse/default.pa</code> and add the following line <strong>after</strong> the line
<code>.ifexists module-udev-detect.so</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>load-module module-alsa-source device<span style=color:#f92672>=</span>hw:0,0
</span></span></code></pre></div><p>Test the mic with <code>pavucontrol</code> (<code>sudo pacman -S pavucontrol</code>) or with this snippet (needs <code>alsa-utils</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>test-microphone<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    arecord -vvv -f dat /dev/null
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Used with `test-microphone`. Shows the levels detected by the mic</span>
</span></span></code></pre></div><p>:: <em><strong>WORK IN PROGRESS</strong></em> ::</p><h1 id=extras>Extras
<a href=#extras class=h-anchor aria-hidden=true>#</a></h1><h2 id=add-some-wallpaper-optional>Add some wallpaper (optional)
<a href=#add-some-wallpaper-optional class=h-anchor aria-hidden=true>#</a></h2><p>Install <code>archlinux-wallpaper</code>, then choose a wallpaper by right clicking > Desktop Options:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># They get installed in /usr/share/backgrounds/archlinux</span>
</span></span><span style=display:flex><span><span style=color:#75715e># They are a bit old, but they check out.</span>
</span></span><span style=display:flex><span>sudo pacman -S archlinux-wallpaper
</span></span></code></pre></div><p>I use <code>wave</code>.</p><h2 id=audio-management>Audio management
<a href=#audio-management class=h-anchor aria-hidden=true>#</a></h2><p>You probably need these at some point:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo pacman -S alsa-utils pavucontrol
</span></span></code></pre></div><p>They are used to manage the low-level microphone and playback drivers/devices.</p><h2 id=other-programs>Other programs
<a href=#other-programs class=h-anchor aria-hidden=true>#</a></h2><p>There are many other programs which are useful to me.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span><span style=color:#75715e># The set command here allows for in-line comments, so you can copy-paste</span>
</span></span><span style=display:flex><span><span style=color:#75715e># this command as-is and run it.</span>
</span></span><span style=display:flex><span>set -k
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo pacman -Syu <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  via polkit <span style=color:#ae81ff>\ </span><span style=color:#75715e># VIA needs to do some setup. Run `pkttyagent &amp;` before the first run. See `polkit` for info. </span>
</span></span><span style=display:flex><span>  okular <span style=color:#ae81ff>\ </span><span style=color:#75715e># PDF and more reader. This pulls is all qt deps, but... whatever.</span>
</span></span><span style=display:flex><span>  kwantum qt5ct <span style=color:#ae81ff>\ </span><span style=color:#75715e># Edit qt apps looks. I use KT-Arc for the theme.</span>
</span></span><span style=display:flex><span>  engrampa <span style=color:#ae81ff>\ </span><span style=color:#75715e># Graphical zip file manager</span>
</span></span></code></pre></div><p>As a bioinformatician, I also need these:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>set -k
</span></span><span style=display:flex><span>sudo pacman -S <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  r gcc-fortran <span style=color:#ae81ff>\ </span><span style=color:#75715e># gcc-fortran is needed to compile most packages</span>
</span></span><span style=display:flex><span>  python python-pip python-venv <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  rustup <span style=color:#ae81ff>\ </span><span style=color:#75715e># Run the extra steps below</span>
</span></span><span style=display:flex><span>  docker <span style=color:#ae81ff>\ </span><span style=color:#75715e># Run the extra steps below</span>
</span></span><span style=display:flex><span>  texlive-most <span style=color:#ae81ff>\ </span><span style=color:#75715e># For latex, and R too (knitting). You can select just a subset of the whole package.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>yay -S <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  rstudio-desktop-bin <span style=color:#ae81ff>\ </span><span style=color:#75715e># Currently glitched. See the aur page</span>
</span></span><span style=display:flex><span>  visual-studio-code-bin <span style=color:#ae81ff>\ </span><span style=color:#75715e># The proprietary one, to access packages easily. Has telemetry.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Rust finalization</span>
</span></span><span style=display:flex><span>rustup default stable
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Docker finalization</span>
</span></span><span style=display:flex><span>sudo systemctl enable --now docker.service
</span></span></code></pre></div><p>Extra packages for some R packages:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zsh data-lang=zsh><span style=display:flex><span>sudo pacman -S proj
</span></span></code></pre></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://mrhedmad.github.io/blog/posts/on_2d_lm_deas/><span class=button__icon>←</span>
<span class=button__text>On bi-dimensional qualitative LMs for gene expression analysis</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><div class="copyright copyright--user">© Luca Visentin - 2022</div></div></footer><script src=https://mrhedmad.github.io/blog/assets/main.js></script><script src=https://mrhedmad.github.io/blog/assets/prism.js></script></div></body></html>